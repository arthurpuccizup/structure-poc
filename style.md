# POC Style Guide

## Summary

- [Introduction](#introduction)
- [Overall](#overall)
    - [Routes](#routes)
    - [Handlers](#handlers)
    - [Logger](#logger)
    - [Errors](#errors)
    
   
## Introduction

This guide was created with the intention of show how a style guide should be, it's intended to serve 
as model for the final version, it was inspired by [Uber's style guide](https://github.com/uber-go/guide/blob/master/style.md)
, so it's a good idea to see how theirs's look like. 

## Overall

### Routes
All routes should be centralized at one place, this place could be the func routes at http.go, or a routes.go file.
The routes should be grouped with the group function of the framework

### Handlers
All handlers should not be a direct handler, but instead a func that abstract the real handler, 
which is an anonymous func. And each handler should receive only one parameter, which represents 
the exactly use case that the handler will execute;


<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>

```go
func someHandler(c echo.Context) error {
  ...
}
```

</td><td>

```go
func someHandler(myUseCase useCase.MyUseCase) echo.HandlerFunc {
    return func (c echo.Context) error {
        ...	
    }
}
```
</table>

### Logger
The logging strategy is based in a request scope approach, so the logger is created and put in the request context 
by the ContextLogger middleware at tracker.go, and if needed the logger can retrived from the context, 
or the context can be passed as function parameter, to the other functions that needs it.

The logger is already configured to use the request id, which is generated by the first middleware at the request chain.

### Errors
When dealing with errors, there is a specific type to use, we created a CustomError type, which is an extension to the default
error interface, it has some extra information to make the errors more trackable, such as:
  - Error ID: Is an auto generated id for each new error created;
  - Operation Map: Used to simulate a more readable and customized stack trace;
  - Meta Map: A map to put any meta info important for your error;